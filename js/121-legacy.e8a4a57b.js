(self["webpackChunkadminsystem1"]=self["webpackChunkadminsystem1"]||[]).push([[121],{5261:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alluser"},[r("el-card",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{change:e.search},model:{value:e.myparams.keyword,callback:function(t){e.$set(e.myparams,"keyword",t)},expression:"myparams.keyword"}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("主要按钮")])],1)],1)],1),r("div",{staticClass:"home-main"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:"",border:"","status-icon":""}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:"编号",type:"index"}}),r("el-table-column",{attrs:{prop:"nickname",label:"姓名",width:"100"}}),r("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.formatTime(t.row.posttime)))])]}}])}),r("el-table-column",{attrs:{width:"150",prop:"contact",label:"电话"}}),r("el-table-column",{attrs:{prop:"weixin",label:"微信",width:"180"}}),r("el-table-column",{attrs:{width:"150",prop:"qq",label:"QQ"}}),r("el-table-column",{attrs:{width:"180",prop:"zhuanye",label:"专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"major"},[e._v(" "+e._s(t.row.zhuanye)+" "),r("span",{staticClass:"major",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.infoclass))])])]}}])}),r("el-table-column",{attrs:{width:"150",prop:"laiyuan",label:"信息来源"}}),r("el-table-column",{attrs:{prop:"dizhi",label:"地区"}}),r("el-table-column",{attrs:{width:"100",prop:"kefu",label:"客服"}}),r("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(r){return e.clickChange(t.row.id,t.row)}}})],1),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(r){return e.delUser(t.row.id)}}})],1)]}}])})],1),r("div",{staticClass:"pages"},[r("el-pagination",{attrs:{"page-sizes":[20,50,60],"current-page":e.myparams.page,"page-size":e.myparams.num,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("ChangeDialog",{ref:"changDialogInfo"})],1)},n=[],i=(r(8862),r(2275)),s=r(1325),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"修改客户信息",width:"70%",visible:e.dialogTableVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeDialog}},[e._v(" "+e._s(e.rowId)+" "),r("el-form",{ref:"adduserForm",staticClass:"demo-ruleForm",attrs:{model:e.adduserForm,rules:e.adduserFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"客户名称",prop:"nickname"}},[r("el-input",{model:{value:e.adduserForm.nickname,callback:function(t){e.$set(e.adduserForm,"nickname","string"===typeof t?t.trim():t)},expression:"adduserForm.nickname"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"contact"}},[r("el-input",{model:{value:e.adduserForm.contact,callback:function(t){e.$set(e.adduserForm,"contact","string"===typeof t?t.trim():t)},expression:"adduserForm.contact"}})],1),r("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[r("el-input",{model:{value:e.adduserForm.qq,callback:function(t){e.$set(e.adduserForm,"qq","string"===typeof t?t.trim():t)},expression:"adduserForm.qq"}})],1),r("el-form-item",{attrs:{label:"微信",prop:"weixin"}},[r("el-input",{model:{value:e.adduserForm.weixin,callback:function(t){e.$set(e.adduserForm,"weixin","string"===typeof t?t.trim():t)},expression:"adduserForm.weixin"}})],1),r("el-form-item",{attrs:{label:"专业咨询",prop:"zhuanye"}},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adduserForm.zhuanye,callback:function(t){e.$set(e.adduserForm,"zhuanye",t)},expression:"adduserForm.zhuanye"}},e._l(e.zhuanyeList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.classname}})})),1)],1),r("el-col",{attrs:{span:20}},[r("el-input",{model:{value:e.adduserForm.infoclass,callback:function(t){e.$set(e.adduserForm,"infoclass",t)},expression:"adduserForm.infoclass"}})],1)],1)],1),r("el-form-item",{attrs:{label:"信息来源",prop:"laiyuan"}},[r("el-input",{model:{value:e.adduserForm.laiyuan,callback:function(t){e.$set(e.adduserForm,"laiyuan","string"===typeof t?t.trim():t)},expression:"adduserForm.laiyuan"}})],1),r("el-form-item",{attrs:{label:"所在地",prop:"dizhi"}},[r("el-input",{model:{value:e.adduserForm.dizhi,callback:function(t){e.$set(e.adduserForm,"dizhi","string"===typeof t?t.trim():t)},expression:"adduserForm.dizhi"}})],1),r("el-form-item",{attrs:{label:"选择客服",prop:"kefu"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.adduserForm.kefu,callback:function(t){e.$set(e.adduserForm,"kefu","string"===typeof t?t.trim():t)},expression:"adduserForm.kefu"}},e._l(e.kefuList,(function(e){return r("el-option",{key:e.id,attrs:{value:e.classname}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("修改")]),r("el-button",{on:{click:function(t){return e.resetForm(e.adduserForm)}}},[e._v("重置")])],1)],1)],1)},o=[],u=(r(4916),r(3123),r(6193)),c={data:function(){return{dialogTableVisible:!1,rowId:0,kefuList:[],zhuanyeList:[],adduserForm:{nickname:"",contact:"",qq:"",weixin:"",laiyuan:"",dizhi:"",kefu:[],zhuanye:"",infoclass:""},adduserFormRules:{nickname:[{required:!0,message:"请输入活动名称",trigger:"blur"}],zhuanye:[{required:!0,message:"请输入专业",trigger:"blur"}],laiyuan:[{required:!0,message:"请输入来源",trigger:"blur"}],dizhi:[{required:!0,message:"请输入地址",trigger:"blur"}],kefu:[{type:"array",required:!0,message:"请至少选择一个客服",trigger:"change"}],infoclass:[{required:!0,message:"请输入专业信息",trigger:"blur"}],contact:[{validator:u.p,trigger:"blur"}],qq:[{validator:u.p,trigger:"blur"}],weixin:[{validator:u.p,trigger:"blur"}]}}},mounted:function(){this.getXialaInfo();var e=window.sessionStorage.getItem("singleUser");e&&window.sessionStorage.removeItem("singleUser")},watch:{},methods:{closeDialog:function(){window.sessionStorage.removeItem("singleUser")},getSingleUser:function(e){var t=this;(0,i.VO)(this.rowId).then((function(e){t.adduserForm=e.data.results,t.adduserForm.kefu=t.adduserForm.kefu.split("-")}))},updateUser:function(){var e=this;this.$refs.adduserForm.validate((function(t){t&&(0,i.sB)(e.adduserForm).then((function(t){e.$message.success("更新成功"),e.dialogTableVisible=!1,e.$parent.getuserList()}))}))},resetForm:function(){this.$refs.adduserForm.resetFields(),this.getSingleUser()},getXialaInfo:function(){var e=this;(0,i.b8)().then((function(t){e.zhuanyeList=t.data.infoclass,e.kefuList=t.data.kefu}))}}},d=c,m=r(1001),f=(0,m.Z)(d,l,o,!1,null,null,null),p=f.exports,g={components:{ChangeDialog:p},data:function(){return{userList:[],total:0,myparams:{num:20,page:1,keyword:""}}},mounted:function(){this.getuserList()},methods:{clickChange:function(e,t){this.$refs.changDialogInfo.dialogTableVisible=!0,this.$refs.changDialogInfo.rowId=e,this.$refs.changDialogInfo.getSingleUser(),window.sessionStorage.setItem("singleUser",JSON.stringify(t))},delUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,i.SB)(e),t.$message({type:"success",message:"删除成功!"}),t.getuserList()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getuserList:function(){var e=this;(0,i.Vr)(this.myparams).then((function(t){e.userList=t.data.results,e.total=t.data.num}))},formatTime:function(e){return(0,s.F)(e,2)},handleSizeChange:function(e){this.myparams.num=e,this.getuserList()},handleCurrentChange:function(e){this.myparams.page=e,this.getuserList()},search:function(){this.getuserList()}}},h=g,b=(0,m.Z)(h,a,n,!1,null,null,null),y=b.exports},1589:function(e,t,r){var a=r(7854),n=r(1400),i=r(6244),s=r(6135),l=a.Array,o=Math.max;e.exports=function(e,t,r){for(var a=i(e),u=n(t,a),c=n(void 0===r?a:r,a),d=l(o(c-u,0)),m=0;u<c;u++,m++)s(d,m,e[u]);return d.length=m,d}},8862:function(e,t,r){var a=r(2109),n=r(5005),i=r(2104),s=r(6916),l=r(1702),o=r(7293),u=r(3157),c=r(614),d=r(111),m=r(2190),f=r(206),p=r(133),g=n("JSON","stringify"),h=l(/./.exec),b=l("".charAt),y=l("".charCodeAt),v=l("".replace),k=l(1..toString),w=/[\uD800-\uDFFF]/g,F=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,z=!p||o((function(){var e=n("Symbol")();return"[null]"!=g([e])||"{}"!=g({a:e})||"{}"!=g(Object(e))})),C=o((function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")})),$=function(e,t){var r=f(arguments),a=t;if((d(t)||void 0!==e)&&!m(e))return u(t)||(t=function(e,t){if(c(a)&&(t=s(a,this,e,t)),!m(t))return t}),r[1]=t,i(g,null,r)},S=function(e,t,r){var a=b(r,t-1),n=b(r,t+1);return h(F,e)&&!h(x,n)||h(x,e)&&!h(F,a)?"\\u"+k(y(e,0),16):e};g&&a({target:"JSON",stat:!0,arity:3,forced:z||C},{stringify:function(e,t,r){var a=f(arguments),n=i(z?$:g,null,a);return C&&"string"==typeof n?v(n,w,S):n}})},3123:function(e,t,r){"use strict";var a=r(2104),n=r(6916),i=r(1702),s=r(7007),l=r(7850),o=r(9670),u=r(4488),c=r(6707),d=r(1530),m=r(7466),f=r(1340),p=r(8173),g=r(1589),h=r(7651),b=r(2261),y=r(2999),v=r(7293),k=y.UNSUPPORTED_Y,w=4294967295,F=Math.min,x=[].push,z=i(/./.exec),C=i(x),$=i("".slice),S=!v((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));s("split",(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=f(u(this)),s=void 0===r?w:r>>>0;if(0===s)return[];if(void 0===e)return[i];if(!l(e))return n(t,i,e,s);var o,c,d,m=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,y=new RegExp(e.source,p+"g");while(o=n(b,y,i)){if(c=y.lastIndex,c>h&&(C(m,$(i,h,o.index)),o.length>1&&o.index<i.length&&a(x,m,g(o,1)),d=o[0].length,h=c,m.length>=s))break;y.lastIndex===o.index&&y.lastIndex++}return h===i.length?!d&&z(y,"")||C(m,""):C(m,$(i,h)),m.length>s?g(m,0,s):m}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:n(t,this,e,r)}:t,[function(t,r){var a=u(this),s=void 0==t?void 0:p(t,e);return s?n(s,t,a,r):n(i,f(a),t,r)},function(e,a){var n=o(this),s=f(e),l=r(i,n,s,a,i!==t);if(l.done)return l.value;var u=c(n,RegExp),p=n.unicode,g=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(k?"g":"y"),b=new u(k?"^(?:"+n.source+")":n,g),y=void 0===a?w:a>>>0;if(0===y)return[];if(0===s.length)return null===h(b,s)?[s]:[];var v=0,x=0,z=[];while(x<s.length){b.lastIndex=k?0:x;var S,_=h(b,k?$(s,x):s);if(null===_||(S=F(m(b.lastIndex+(k?x:0)),s.length))===v)x=d(s,x,p);else{if(C(z,$(s,v,x)),z.length===y)return z;for(var q=1;q<=_.length-1;q++)if(C(z,_[q]),z.length===y)return z;x=v=S}}return C(z,$(s,v)),z}]}),!S,k)}}]);
//# sourceMappingURL=121-legacy.e8a4a57b.js.map