"use strict";(self["webpackChunkadminsystem1"]=self["webpackChunkadminsystem1"]||[]).push([[121],{5261:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alluser"},[a("el-card",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{change:e.search},model:{value:e.myparams.keyword,callback:function(t){e.$set(e.myparams,"keyword",t)},expression:"myparams.keyword"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("主要按钮")])],1)],1)],1),a("div",{staticClass:"home-main"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:"",border:"","status-icon":""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"编号",type:"index"}}),a("el-table-column",{attrs:{prop:"nickname",label:"姓名",width:"100"}}),a("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.formatTime(t.row.posttime)))])]}}])}),a("el-table-column",{attrs:{width:"150",prop:"contact",label:"电话"}}),a("el-table-column",{attrs:{prop:"weixin",label:"微信",width:"180"}}),a("el-table-column",{attrs:{width:"150",prop:"qq",label:"QQ"}}),a("el-table-column",{attrs:{width:"180",prop:"zhuanye",label:"专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"major"},[e._v(" "+e._s(t.row.zhuanye)+" "),a("span",{staticClass:"major",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.infoclass))])])]}}])}),a("el-table-column",{attrs:{width:"150",prop:"laiyuan",label:"信息来源"}}),a("el-table-column",{attrs:{prop:"dizhi",label:"地区"}}),a("el-table-column",{attrs:{width:"100",prop:"kefu",label:"客服"}}),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.clickChange(t.row.id,t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.delUser(t.row.id)}}})],1)]}}])})],1),a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{"page-sizes":[20,50,60],"current-page":e.myparams.page,"page-size":e.myparams.num,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("ChangeDialog",{ref:"changDialogInfo"})],1)},r=[],l=a(2275),i=a(1325),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改客户信息",width:"70%",visible:e.dialogTableVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeDialog}},[e._v(" "+e._s(e.rowId)+" "),a("el-form",{ref:"adduserForm",staticClass:"demo-ruleForm",attrs:{model:e.adduserForm,rules:e.adduserFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"nickname"}},[a("el-input",{model:{value:e.adduserForm.nickname,callback:function(t){e.$set(e.adduserForm,"nickname","string"===typeof t?t.trim():t)},expression:"adduserForm.nickname"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"contact"}},[a("el-input",{model:{value:e.adduserForm.contact,callback:function(t){e.$set(e.adduserForm,"contact","string"===typeof t?t.trim():t)},expression:"adduserForm.contact"}})],1),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("el-input",{model:{value:e.adduserForm.qq,callback:function(t){e.$set(e.adduserForm,"qq","string"===typeof t?t.trim():t)},expression:"adduserForm.qq"}})],1),a("el-form-item",{attrs:{label:"微信",prop:"weixin"}},[a("el-input",{model:{value:e.adduserForm.weixin,callback:function(t){e.$set(e.adduserForm,"weixin","string"===typeof t?t.trim():t)},expression:"adduserForm.weixin"}})],1),a("el-form-item",{attrs:{label:"专业咨询",prop:"zhuanye"}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adduserForm.zhuanye,callback:function(t){e.$set(e.adduserForm,"zhuanye",t)},expression:"adduserForm.zhuanye"}},e._l(e.zhuanyeList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.classname}})})),1)],1),a("el-col",{attrs:{span:20}},[a("el-input",{model:{value:e.adduserForm.infoclass,callback:function(t){e.$set(e.adduserForm,"infoclass",t)},expression:"adduserForm.infoclass"}})],1)],1)],1),a("el-form-item",{attrs:{label:"信息来源",prop:"laiyuan"}},[a("el-input",{model:{value:e.adduserForm.laiyuan,callback:function(t){e.$set(e.adduserForm,"laiyuan","string"===typeof t?t.trim():t)},expression:"adduserForm.laiyuan"}})],1),a("el-form-item",{attrs:{label:"所在地",prop:"dizhi"}},[a("el-input",{model:{value:e.adduserForm.dizhi,callback:function(t){e.$set(e.adduserForm,"dizhi","string"===typeof t?t.trim():t)},expression:"adduserForm.dizhi"}})],1),a("el-form-item",{attrs:{label:"选择客服",prop:"kefu"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.adduserForm.kefu,callback:function(t){e.$set(e.adduserForm,"kefu","string"===typeof t?t.trim():t)},expression:"adduserForm.kefu"}},e._l(e.kefuList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.classname}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("修改")]),a("el-button",{on:{click:function(t){return e.resetForm(e.adduserForm)}}},[e._v("重置")])],1)],1)],1)},o=[],u=a(6193),d={data(){return{dialogTableVisible:!1,rowId:0,kefuList:[],zhuanyeList:[],adduserForm:{nickname:"",contact:"",qq:"",weixin:"",laiyuan:"",dizhi:"",kefu:[],zhuanye:"",infoclass:""},adduserFormRules:{nickname:[{required:!0,message:"请输入活动名称",trigger:"blur"}],zhuanye:[{required:!0,message:"请输入专业",trigger:"blur"}],laiyuan:[{required:!0,message:"请输入来源",trigger:"blur"}],dizhi:[{required:!0,message:"请输入地址",trigger:"blur"}],kefu:[{type:"array",required:!0,message:"请至少选择一个客服",trigger:"change"}],infoclass:[{required:!0,message:"请输入专业信息",trigger:"blur"}],contact:[{validator:u.p,trigger:"blur"}],qq:[{validator:u.p,trigger:"blur"}],weixin:[{validator:u.p,trigger:"blur"}]}}},mounted(){this.getXialaInfo();const e=window.sessionStorage.getItem("singleUser");e&&window.sessionStorage.removeItem("singleUser")},watch:{},methods:{closeDialog(){window.sessionStorage.removeItem("singleUser")},getSingleUser(e){(0,l.VO)(this.rowId).then((e=>{this.adduserForm=e.data.results,this.adduserForm.kefu=this.adduserForm.kefu.split("-")}))},updateUser(){this.$refs.adduserForm.validate((e=>{e&&(0,l.sB)(this.adduserForm).then((e=>{this.$message.success("更新成功"),this.dialogTableVisible=!1,this.$parent.getuserList()}))}))},resetForm(){this.$refs.adduserForm.resetFields(),this.getSingleUser()},getXialaInfo(){(0,l.b8)().then((e=>{this.zhuanyeList=e.data.infoclass,this.kefuList=e.data.kefu}))}}},c=d,m=a(1001),p=(0,m.Z)(c,n,o,!1,null,null,null),g=p.exports,h={components:{ChangeDialog:g},data(){return{userList:[],total:0,myparams:{num:20,page:1,keyword:""}}},mounted(){this.getuserList()},methods:{clickChange(e,t){this.$refs.changDialogInfo.dialogTableVisible=!0,this.$refs.changDialogInfo.rowId=e,this.$refs.changDialogInfo.getSingleUser(),window.sessionStorage.setItem("singleUser",JSON.stringify(t))},delUser(e){this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,l.SB)(e),this.$message({type:"success",message:"删除成功!"}),this.getuserList()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},getuserList(){(0,l.Vr)(this.myparams).then((e=>{this.userList=e.data.results,this.total=e.data.num}))},formatTime(e){return(0,i.F)(e,2)},handleSizeChange(e){this.myparams.num=e,this.getuserList()},handleCurrentChange(e){this.myparams.page=e,this.getuserList()},search(){this.getuserList()}}},f=h,b=(0,m.Z)(f,s,r,!1,null,null,null),y=b.exports}}]);
//# sourceMappingURL=121.63990983.js.map